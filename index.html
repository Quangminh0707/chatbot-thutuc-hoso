<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TTHC_Chatbot - Hệ thống tra cứu</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --df-messenger-button-titlebar-color: #f4f4f4;
            --df-messenger-send-icon: #1a73e8;
            --df-messenger-user-message: #e7f3ff;
            --df-messenger-chat-background-color: #ffffff;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        }

        body {
            display: flex;
            height: 100vh;
            background-color: #ffffff;
            overflow: hidden;
        }

        /* Sidebar bên trái */
        .sidebar {
            width: 260px;
            background-color: #f9f9f9;
            display: flex;
            flex-direction: column;
            padding: 15px;
            border-right: 1px solid #e5e5e5;
            flex-shrink: 0;
        }

        .sidebar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .sidebar-item {
            display: flex;
            align-items: center;
            padding: 12px;
            border-radius: 8px;
            cursor: pointer;
            color: #000;
            text-decoration: none;
            font-size: 14px;
            margin-bottom: 5px;
            transition: background 0.2s;
            border: none;
            background: none;
            width: 100%;
            text-align: left;
        }

        .sidebar-item:hover { background-color: #ececec; }
        .sidebar-item i { margin-right: 12px; width: 16px; text-align: center; }

        /* Vùng nội dung chính */
        .main-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100vh;
        }

        /* Top Nav */
        .top-nav {
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 20px;
            height: 60px;
        }

        .brand-version { font-weight: 600; font-size: 18px; display: flex; align-items: center; }

        /* Khu vực hiển thị nội dung giữa */
        .content-area {
            width: 100%;
            max-width: 800px;
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            text-align: center;
            overflow-y: auto;
        }

        .project-title {
            color: #1a73e8;
            font-size: 26px;
            font-weight: 800;
            margin-bottom: 10px;
            text-transform: uppercase;
        }

        .procedure-list {
            list-style: none;
            text-align: left;
            background: #f8f9fa;
            padding: 15px 25px;
            border-radius: 12px;
            margin-bottom: 20px;
            border: 1px solid #eee;
            line-height: 1.8;
            width: 100%;
            max-width: 650px;
        }

        .procedure-list li i {
            color: #1a73e8;
            margin-right: 10px;
        }

        /* KHU VỰC QUAN TRỌNG: ÉP CHATBOT VÀO GIỮA */
        #chatbot-wrapper {
            width: 100%;
            max-width: 750px; /* Độ rộng khung chat giống ChatGPT */
            height: 500px;    /* Chiều cao khung chat */
            margin-top: 10px;
            position: relative;
        }

        /* Ẩn bong bóng và ép khung hiển thị trực tiếp */
        df-messenger {
            position: absolute !important;
            inset: 0 !important;
            z-index: 100;
        }

        /* Kỹ thuật đặc biệt để ẩn nút bấm (launcher) và tiêu đề thừa của Dialogflow */
        df-messenger {
            --df-messenger-chat-window-height: 100%;
            --df-messenger-chat-window-width: 100%;
        }

        /* Style để ẩn nút launcher bằng CSS Shadow DOM (quan trọng) */
        df-messenger::part(launcher) {
            display: none !important;
        }

        /* Tùy chỉnh khung chat thông qua các thuộc tính part */
        df-messenger::part(chat-wrapper) {
            position: relative;
            bottom: 0;
            right: 0;
            height: 100%;
            width: 100%;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            border-radius: 15px;
            border: 1px solid #e5e5e5;
        }
    </style>
</head>
<body>

    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <i class="fa-solid fa-bars" style="cursor: pointer; color: #676767;"></i>
            <i class="fa-regular fa-pen-to-square" style="cursor: pointer; color: #676767;" onclick="createNewChat()"></i>
        </div>
        
        <button class="sidebar-item" onclick="createNewChat()">
            <i class="fa-regular fa-message"></i> Đoạn chat mới
        </button>
        <button class="sidebar-item"><i class="fa-solid fa-magnifying-glass"></i> Tìm kiếm</button>
        <button class="sidebar-item"><i class="fa-regular fa-image"></i> Ảnh</button>
        <button class="sidebar-item"><i class="fa-solid fa-grid-2"></i> Ứng dụng</button>
    </aside>

    <main class="main-container">
        <header class="top-nav">
            <div class="brand-version">
                TTHC_Chatbot <i class="fa-solid fa-chevron-down" style="font-size: 12px; margin-left: 8px; color: #676767;"></i>
            </div>
            <div style="color: #676767; display: flex; gap: 15px;">
                <i class="fa-solid fa-user-plus"></i>
                <i class="fa-solid fa-circle-notch"></i>
            </div>
        </header>

        <div class="content-area">
            <h1 class="project-title">DỰ ÁN CHATBOT TRA CỨU TTHC ĐƠN GIẢN</h1>
            <p style="margin-bottom: 10px; color: #555;">Chatbot đã sẵn sàng. Hãy thử hỏi về 3 thủ tục:</p>
            
            <ul class="procedure-list">
                <li><i class="fa-solid fa-circle-check"></i> Quy định về Luật Hôn nhân & Gia đình</li>
                <li><i class="fa-solid fa-circle-check"></i> Quy định về Luật Căn cước mới nhất</li>
                <li><i class="fa-solid fa-circle-check"></i> Quy định về Luật Đất đai (Cấp lại sổ đỏ)</li>
            </ul>

            <!-- Đây là nơi khung chat sẽ xuất hiện -->
            <div id="chatbot-wrapper"></div>
        </div>
    </main>

    <script src="https://www.gstatic.com/dialogflow-console/fast/messenger/bootstrap.js?v=1"></script>
    
    <script>
        function createNewChat() {
            const wrapper = document.getElementById('chatbot-wrapper');
            wrapper.innerHTML = ''; // Xóa chat cũ
            
            const chatElement = document.createElement('df-messenger');
            chatElement.setAttribute('intent', 'WELCOME');
            chatElement.setAttribute('chat-title', 'TTHC_Chatbot_KHKT');
            chatElement.setAttribute('agent-id', 'beb30889-a174-4fd7-b494-b2a3fe16a795');
            chatElement.setAttribute('language-code', 'vi');
            chatElement.setAttribute('expand', 'true'); // Ép khung chat luôn mở
            
            wrapper.appendChild(chatElement);
        }

        // Tự khởi động chat khi load trang
        window.onload = createNewChat;
    </script>

</body>
</html>
